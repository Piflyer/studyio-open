rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /private/{userId}/{document=**} {
      allow read, update, delete: if request.auth != null && request.auth.uid == userId;
      allow create: if request.auth != null;
    }
    //match /public/{userId}/posts/{document=**} {
    //  allow update, delete: if request.auth != null && request.auth.uid == userId;
    //  allow create: if request.auth != null;
   //   allow read;
    //}
    match /public {
    	allow read, create: if request.auth != null;
    }
  	match /flashcards {
    	allow read, create: if request.auth != null;
    }
   	match /flashcards/{userID}/{document=**} {
   		 allow update, delete: if request.auth != null && request.auth.uid == userID;
       allow read, create: if request.auth != null;
    }
    match /public/{userID}/{document=**} {
   		 allow update, delete: if request.auth != null && request.auth.uid == userID;
       allow read, create: if request.auth != null;
    }
    match /{path=**}/posts/{id} {
    	allow read, create: if request.auth != null;
    }
    match /{path=**}/comments/{comment} {
    	allow read, create: if request.auth != null;
      allow update, delete: if request.auth != null && request.auth.uid == resource.data.uid;
    }
  }
}